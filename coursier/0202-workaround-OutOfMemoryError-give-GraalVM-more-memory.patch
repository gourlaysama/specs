From cf4e4cff1e18887c477648c6c1b2df0f8c45ee25 Mon Sep 17 00:00:00 2001
From: Antoine Gourlay <antoine@gourlay.fr>
Date: Fri, 3 Dec 2021 15:44:30 +0100
Subject: [PATCH] workaround OutOfMemoryError: give GraalVM more memory

---
 scripts/shared/GenerateLauncher.sc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/scripts/shared/GenerateLauncher.sc b/scripts/shared/GenerateLauncher.sc
index cf0a0c2..8ba08ec 100644
--- a/scripts/shared/GenerateLauncher.sc
+++ b/scripts/shared/GenerateLauncher.sc
@@ -214,7 +214,7 @@ def nativeImage(
     }
 
   val mem =
-    if (Util.os == "linux") "3584m"
+    if (Util.os == "linux") "8g"
     else "3g"
 
   val graalvmVer = if (Util.os == "win") "20.1.0" else "20.1.0"
@@ -297,7 +297,7 @@ def nativeImage(
   if (Util.os == "win" || (Util.os == "linux" && coursierLauncher.endsWith("cs")))
     run(extraNativeImageOpts, extraCsOpts)
   else
-    run(extraNativeImageOpts)
+    run(extraNativeImageOpts, extraCsOpts)
 }
 
 /**
-- 
2.33.1

